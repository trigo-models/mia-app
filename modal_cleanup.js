const fs = require('fs');
const path = 'C:/MIA-APP/app/admin/projects/[id]/page.tsx';
let text = fs.readFileSync(path, 'utf8');
const startToken = '        {/* Task Details Modal */}';
const endToken = '        </Dialog>';
const start = text.indexOf(startToken);
const end = text.indexOf(endToken, start) + endToken.length;
if (start === -1 || end === -1) {
  throw new Error('Modal block not found');
}
const newBlock =         {/* Task Details Modal */}\n        <Dialog open={isModalOpen} onOpenChange={setIsModalOpen}>\n          <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle className=\"hebrew-text text-xl font-bold text-gray-900\">\n                {selectedTask?.clause_name || 'ללא שם'}\n              </DialogTitle>\n              <DialogClose onClose={() => setIsModalOpen(false)} />\n            </DialogHeader>\n            <DialogBody>\n              {selectedTask && (\n                <div className=\"space-y-6\">\n                  <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-2 text-xs text-gray-500 hebrew-text font-medium\">\n                          <Calendar className=\"h-4 w-4 text-gray-400\" />\n                          <span>תאריך ביצוע</span>\n                        </div>\n                        <div className=\"text-sm font-semibold text-gray-900 hebrew-text\">\n                          {formatDate(selectedTask.date_created || selectedTask.created_at)}\n                        </div>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-2 text-xs text-gray-500 hebrew-text font-medium\">\n                          <Tag className=\"h-4 w-4 text-gray-400\" />\n                          <span>קטגוריה</span>\n                        </div>\n                        <div className=\"text-sm font-semibold text-gray-900 hebrew-text\">\n                          {TASK_TYPE_LABELS[selectedTask.task_type] || selectedTask.task_type}\n                        </div>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-2 text-xs text-gray-500 hebrew-text font-medium\">\n                          <FileText className=\"h-4 w-4 text-gray-400\" />\n                          <span>שם הסעיף</span>\n                        </div>\n                        <div className=\"text-sm font-semibold text-gray-900 hebrew-text line-clamp-2\">\n                          {selectedTask.clause_name || 'ללא שם'}\n                        </div>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-2 text-xs text-gray-500 hebrew-text font-medium\">\n                          <User className=\"h-4 w-4 text-gray-400\" />\n                          <span>ראש צוות</span>\n                        </div>\n                        <div className=\"text-sm font-semibold text-gray-900 hebrew-text\">\n                          {selectedTask.created_by || '-'}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {loadingTeamInfo ? (\n                    <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm text-center text-gray-500 hebrew-text\">\n                      טוען מידע על הצוות...\n                    </div>\n                  ) : (teamInfo && (teamInfo.leaders?.length > 0 || teamInfo.members?.length > 0)) ? (\n                    <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm space-y-4\">\n                      <div className=\"flex items-center gap-2 text-sm font-semibold text-gray-800 hebrew-text\">\n                        <Users className=\"h-4 w-4 text-gray-400\" />\n                        <span>צוות העבודה</span>\n                      </div>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {teamInfo.leaders && teamInfo.leaders.length > 0 && (\n                          <div className=\"space-y-2\">\n                            <div className=\"flex items-center gap-2 text-xs text-gray-500 hebrew-text\">\n                              <User className=\"h-4 w-4 text-gray-400\" />\n                              <span>ראשי צוות</span>\n                            </div>\n                            <div className=\"space-y-1.5\">\n                              {teamInfo.leaders.map((leader, idx) => (\n                                <div\n                                  key={idx}\n                                  className=\"flex items-center justify-between rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-700 hebrew-text\"\n                                >\n                                  <span className=\"truncate\">{leader}</span>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                        {teamInfo.members && teamInfo.members.length > 0 && (\n                          <div className=\"space-y-2\">\n                            <div className=\"flex items-center gap-2 text-xs text-gray-500 hebrew-text\">\n                              <Users className=\"h-4 w-4 text-gray-400\" />\n                              <span>אנשי צוות</span>\n                            </div>\n                            <div className=\"space-y-1.5\">\n                              {teamInfo.members.map((member, idx) => (\n                                <div\n                                  key={idx}\n                                  className=\"flex items-center justify-between rounded-lg border border-gray-200 px-3 py-2 text-sm text-gray-700 hebrew-text\"\n                                >\n                                  <span className=\"truncate\">{member}</span>\n                                </div>\n                              ))}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ) : null}\n\n                  <div className=\"bg-white rounded-xl p-6 border border-gray-200 shadow-sm space-y-4\">\n                    <div className=\"flex items-center gap-2 text-sm font-semibold text-gray-800 hebrew-text\">\n                      <FileText className=\"h-4 w-4 text-gray-400\" />\n                      <span>פרטי המשימה</span>\n                    </div>\n                    <div className=\"space-y-4\">\n                      {renderTaskDetails(selectedTask)}\n                    </div>\n                  </div>\n                </div>\n              )}\n            </DialogBody>\n          </DialogContent>\n        </Dialog>;
const newText = text.slice(0, start) + newBlock + text.slice(end);
fs.writeFileSync(path, newText);
